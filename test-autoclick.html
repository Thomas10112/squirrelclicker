<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8"/>
    <title>Gland Clicker ‚Äî Test Auto-clic</title>

    <!-- Bootstrap 5 -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />

    <style>
        body {
            background: linear-gradient(180deg, #2e7d32, #1b5e20);
            color: #f1f8e9;
            min-height: 100vh;
        }

        .card-squirrel {
            background: rgba(0, 0, 0, .35);
            border-radius: 1rem;
            padding: 2rem;
        }

        .log {
            background: #0f172a;
            font-family: monospace;
            font-size: .9rem;
            height: 220px;
            overflow-y: auto;
            padding: 1rem;
            border-radius: .5rem;
        }
    </style>
</head>

<body class="d-flex align-items-center justify-content-center">
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card-squirrel text-center">

                <h1 class="mb-2">üêøÔ∏è Gland Clicker</h1>
                <p class="text-success-emphasis">Page de test ‚Äî <strong>Auto-clic</strong></p>

                <!-- STATS -->
                <div class="row mb-4">
                    <div class="col">
                        üå∞ Glands
                        <div id="glands" class="fs-4 fw-bold">0</div>
                    </div>
                    <div class="col">
                        üñ±Ô∏è Clicks
                        <div id="clicks" class="fs-4 fw-bold">0</div>
                    </div>
                    <div class="col">
                        üí• Crits
                        <div id="crits" class="fs-4 fw-bold">0</div>
                    </div>
                </div>

                <!-- CONTROLES -->
                <div class="d-grid gap-2 mb-4">
                    <button id="btnManual" class="btn btn-success">
                        üå∞ Clic manuel
                    </button>

                    <button id="btnStart" class="btn btn-warning">
                        ‚ñ∂Ô∏è D√©marrer auto-clic (5 cps)
                    </button>

                    <button id="btnStop" class="btn btn-secondary">
                        ‚èπÔ∏è Stop auto-clic
                    </button>

                    <button id="btnFast" class="btn btn-danger">
                        ‚ö° Auto-clic rapide (20 cps)
                    </button>
                </div>

                <!-- LOG -->
                <div id="log" class="log"></div>

            </div>
        </div>
    </div>
</div>

<!-- SCRIPT TEST -->
<script type="module">
    import {clickGland} from "./crit.js";
    import {startAutoClick, stopAutoClick} from "./autoclick.js";

    // --- STATE MINIMAL DE TEST ---
    const state = {
        glands: "0",
        totalGlandsEarned: "0",
        totalClicks: "0",
        baseClick: "1",
        multipliers: {
            clickBps: 10000,
            prestigeBps: 10000,
            critChanceBps: 500, // 5% pour voir des crits
            critMultBps: 0
        },
        stats: {
            crits: 0,
            bestClick: "0"
        },
        autoClick: {
            enabled: false,
            clicksPerSecond: 0,
            canCrit: true
        }
    };

    // --- UI helpers ---
    const $ = (id) => document.getElementById(id);

    function refreshUI() {
        $("glands").textContent = state.glands;
        $("clicks").textContent = state.totalClicks;
        $("crits").textContent = state.stats.crits;
    }

    function log(msg) {
        const box = $("log");
        box.innerHTML += msg + "<br>";
        box.scrollTop = box.scrollHeight;
    }

    // --- Actions ---
    $("btnManual").onclick = () => {
        clickGland(state);
        log("üñ±Ô∏è clic manuel");
        refreshUI();
    };

    $("btnStart").onclick = () => {
        state.autoClick.enabled = true;
        state.autoClick.clicksPerSecond = 5;
        startAutoClick(state);
        log("‚ñ∂Ô∏è auto-clic d√©marr√© (5 cps)");
    };

    $("btnFast").onclick = () => {
        state.autoClick.enabled = true;
        state.autoClick.clicksPerSecond = 20;
        startAutoClick(state);
        log("‚ö° auto-clic rapide (20 cps)");
    };

    $("btnStop").onclick = () => {
        stopAutoClick();
        state.autoClick.enabled = false;
        log("‚èπÔ∏è auto-clic stopp√©");
    };

    refreshUI();
</script>
</body>
</html>
